[probe]
x_offset: 0.0
y_offset: 0.0
samples: 3
samples_result: average
samples_tolerance: 0.05
samples_tolerance_retries: 5
sample_retract_dist: 3
speed: 5.0
lift_speed: 30
activate_gcode:
  G4 P200 ; Wait 200ms
  SET_TMC_CURRENT STEPPER=stepper_x CURRENT=0.2
  SET_TMC_CURRENT STEPPER=stepper_z CURRENT=0.2
deactivate_gcode:
  {% set run_current = printer.configfile.config['tmc2209 stepper_z'].run_current | float %}
  SET_TMC_CURRENT STEPPER=stepper_x CURRENT={run_current}
  SET_TMC_CURRENT STEPPER=stepper_z CURRENT={run_current}

[bed_mesh]
speed: 300
horizontal_move_z: 3
mesh_min: 40, 20
mesh_max: 210, 190
probe_count: 7, 7
algorithm: bicubic
fade_start: 1
fade_end: 10
fade_target: 0
mesh_pps: 3, 3
zero_reference_position: 125, 111

[stepper_z]
homing_speed: 7

[gcode_macro BED_MESH_CALIBRATE]
rename_existing: _BED_MESH_CALIBRATE
gcode:
  {% set adaptive = params.ADAPTIVE|default(1)|int %}
  _BED_MESH_CALIBRATE ADAPTIVE={adaptive}